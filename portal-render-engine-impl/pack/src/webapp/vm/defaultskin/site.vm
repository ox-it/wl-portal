## Generate a frameset if it was requested and not suppressed - if there is only one page
## in this site - we don't suppress
#if ( $singleToolMap && $sakaiFrameSetRequested && $tabsSites && ( ! $sakaiFrameSuppress || $sitePages.pageNavToolsCount == 1 ) )
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
   "http://www.w3.org/TR/html4/frameset.dtd">
<html>
<head>
    <title>${pageTitle}</title>
</head>
<frameset rows="140, *">
  ## TODO:  Get the height from some CSS place or a property
  #set ( $frameEditParam = "")
  #set ( $frameIsPortlet = "")
  #set ( $frameResetParam = "")
  #set ( $frameOnePageSite = "")
  #if ( $sitePages.pageNavToolsCount == 1 ) 
    #set ( $frameOnePageSite = "&sakai.frame.single.page=true")
  #end
  #set($frameTitle = ${singleToolMap.toolTitleEncode})
  #if ( ! ${frameMaximizedUrl} )
    #set($frameMaximizedUrl = "${singleToolMap.toolUrl}?panel=Main" )
  #end 
  #if ( ${singleToolMap.isPortletPlacement} )
    #set($frameIsPortlet = "&sakai.frame.portlet=true" )
  #end
  #if( ${singleToolMap.toolShowResetButton} )
    #set($frameResetParam = "&sakai.frame.reset=${singleToolMap.toolResetActionUrlEncode}" )
  #end
  #if (${singleToolMap.toolJSR168Edit} )
    #set($frameEditParam = "&sakai.frame.edit=${singleToolMap.toolJSR168Edit}" )
  #end
    <frame src="${currentUrlPath}?sakai.frame.top=true&sakai.frame.title=${frameTitle}${frameIsPortlet}${frameResetParam}${frameEditParam}${frameOnePageSite}"
             frameborder="0" scrolling="no" noresize >
    <frame src="${frameMaximizedUrl}" frameborder="0" name="sakai-content" >
</frameset>
</html>
## Normal Display - non Frame Set
#else
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="${pageSkinRepo}/${pageSkin}/portal.css" type="text/css" rel="stylesheet" media="all" />
<!-- this caises problems for layout nneds investihating -->
    <link href="/portal/styles/portalstyles.css" type="text/css" rel="stylesheet" media="all" />
<!--[if gte IE 5]><![if lt IE 7]>
    <link href="/portal/styles/portalstyles-ie5.css" type="text/css" rel="stylesheet" media="all" />
<![endif]><![endif]-->

    <meta http-equiv="Content-Style-Type" content="text/css" />
#if (! $currentPlacement && $isPDA )
    <meta name="viewport" content="width=320, user-scalable=no" />
#end
#if ( ${bufferedResponse} && ${responseHead} ) 
<!-- Head material from Tool (will include title and headscripts) -->
${responseHead}
<!-- End of Head material from Tool -->
	#if (  $pageColumn0Tools )
		#foreach ( $tool in $pageColumn0Tools ) 
			#if ( $tool ) 
				#if ( $tool.toolRenderResult ) 
${tool.toolRenderResult.getTitle()}
				#end
			#end
		#end
	#end
	#if ($pageTwoColumn)
		#if (  $pageColumn1Tools )
			#foreach ( $tool in $pageColumn1Tools ) 
				#if ( $tool ) 
					#if ( $tool.toolRenderResult ) 
${tool.toolRenderResult.getTitle()}
					#end
				#end
			#end
		#end
	#end
#else 
    <title>${pageTitle}</title>
     <script type="text/javascript" language="JavaScript" src="${pageScriptPath}headscripts.js"></script>
     <script type="text/javascript" language="JavaScript" src="${pageScriptPath}jquery.js"></script>
#end
<script type="text/javascript" language="JavaScript" src="/portal/scripts/portalscripts.js"></script>

#if ( ${styleable} )
<script type="text/javascript" 
    	language="JavaScript" 
    	src="/sakai-preferable-tool/js/styleable.js" >
    </script>
    
    <script type="text/javascript" 
            language="JavaScript">
    window.onload = insertStyleAbleStyles;
    </script>
    #if ( ${styleableStyleSheet} )
	<style type="text/css" title="StyleAble">${styleableStyleSheet}</style>
    #end
    #if ( ${styleableJS} )
	<script type="text/javascript" language="JavaScript">
	${styleableJS} 
	</script>
    #end
#end
</head>
<body class="portalBody">
#if ( $pageTop )
	<script type="text/javascript" language="JavaScript">
	var sakaiPortalWindow = "";
	</script>
#end
<!-- END Header -->

<!-- site.vm -->
#includeSiteNav()
####includeWorksite()
<!-- end site.vm -->
	</body>
</html>
#end
